////////////////////////////////////////////////////////////
// Headers
////////////////////////////////////////////////////////////
#include "wxSFMLCanvas.h"
#include <iostream>

using namespace std;

////////////////////////////////////////////////////////////
/// Custom SFML canvas
////////////////////////////////////////////////////////////
class MyCanvas : public wxSFMLCanvas
{
public :

	////////////////////////////////////////////////////////////
	/// Construct the canvas
	///
	////////////////////////////////////////////////////////////
	MyCanvas(wxWindow* Parent, wxWindowID Id, const wxPoint& Position, const wxSize& Size, long Style = 0) :
		wxSFMLCanvas(Parent, Id, Position, Size, Style)
	{
		// Load an image and assign it to our sprite
		ok = m_texture.loadFromFile("sprite.png");
		m_sprite.setTexture(m_texture);
	}

private :

	////////////////////////////////////////////////////////////
	/// /see wxSFMLCanvas::OnUpdate
	///
	////////////////////////////////////////////////////////////
	virtual void OnUpdate()
	{
		
		if(ok)
			clear(sf::Color(0, 128, 128));
		else
			clear(sf::Color(128, 128, 128));

		m_sprite.setPosition(0,0);
		draw(m_sprite);
	}

	////////////////////////////////////////////////////////////
	/// Member data
	////////////////////////////////////////////////////////////

	sf::Texture m_texture;  ///< Some image to load...
	sf::Sprite m_sprite; ///< Something to draw...
	bool ok;
};


////////////////////////////////////////////////////////////
/// Our main window
////////////////////////////////////////////////////////////
class MyFrame : public wxFrame
{
public :

	////////////////////////////////////////////////////////////
	/// Default constructor : setup the window
	///
	////////////////////////////////////////////////////////////
	MyFrame() :
		wxFrame(NULL, wxID_ANY, "SFML wxWidgets", wxDefaultPosition, wxSize(800, 600))
	{
		// Let's create our SFML view
		new MyCanvas(this, wxID_ANY, wxPoint(50, 50), wxSize(700, 500));
	}
};


////////////////////////////////////////////////////////////
/// Our application class
////////////////////////////////////////////////////////////
class MyApplication : public wxApp
{
private :

	////////////////////////////////////////////////////////////
	/// Initialize the application
	///
	////////////////////////////////////////////////////////////
	virtual bool OnInit()
	{
		// Create the main window
		MyFrame* MainFrame = new MyFrame;
		MainFrame->Show();

		return true;
	}
};

IMPLEMENT_APP(MyApplication);